<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/eggjs/egg"

    >egg (v1.1.0)</a>
</h1>
<h4>A web framework's framework for Node.js</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.egg">module egg</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.Agent">
            function <span class="apidocSignatureSpan">egg.</span>Agent
            <span class="apidocSignatureSpan">(options = {})</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.AgentWorkerLoader">
            function <span class="apidocSignatureSpan">egg.</span>AgentWorkerLoader
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.AppWorkerLoader">
            function <span class="apidocSignatureSpan">egg.</span>AppWorkerLoader
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.Application">
            function <span class="apidocSignatureSpan">egg.</span>Application
            <span class="apidocSignatureSpan">(options = {})</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.Controller">
            function <span class="apidocSignatureSpan">egg.</span>Controller
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.Service">
            function <span class="apidocSignatureSpan">egg.</span>Service
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.startCluster">
            function <span class="apidocSignatureSpan">egg.</span>startCluster
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">egg.</span>context</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">egg.</span>helper</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">egg.</span>request</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">egg.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.egg.context">module egg.context</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.context.curl">
            function <span class="apidocSignatureSpan">egg.context.</span>curl
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.context.getLogger">
            function <span class="apidocSignatureSpan">egg.context.</span>getLogger
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.context.runInBackground">
            function <span class="apidocSignatureSpan">egg.context.</span>runInBackground
            <span class="apidocSignatureSpan">(scope)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.egg.helper">module egg.helper</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.helper.pathFor">
            function <span class="apidocSignatureSpan">egg.helper.</span>pathFor
            <span class="apidocSignatureSpan">(name, params)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.helper.urlFor">
            function <span class="apidocSignatureSpan">egg.helper.</span>urlFor
            <span class="apidocSignatureSpan">(name, params)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.egg.request">module egg.request</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.request._customQuery">
            function <span class="apidocSignatureSpan">egg.request.</span>_customQuery
            <span class="apidocSignatureSpan">(cacheName, filter)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">egg.request.</span>queries</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">egg.request.</span>query</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.egg.utils">module egg.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.egg.utils.convertObject">
            function <span class="apidocSignatureSpan">egg.utils.</span>convertObject
            <span class="apidocSignatureSpan">(obj, ignore)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.egg" id="apidoc.module.egg">module egg</a></h1>


    <h2>
        <a href="#apidoc.element.egg.Agent" id="apidoc.element.egg.Agent">
        function <span class="apidocSignatureSpan">egg.</span>Agent
        <span class="apidocSignatureSpan">(options = {})</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Agent extends EggApplication {
<span class="apidocCodeCommentSpan">  /**
   * @constructor
   * @param {Object} options - see {@link EggApplication}
   */
</span>  constructor(options = {}) {
    options.type = &#x27;agent&#x27;;
    super(options);

    this._wrapMessenger();

    this.loader.load();

    // dump config after loaded, ensure all the dynamic modifications will be recorded
    this.dumpConfig();

    // keep agent alive even it don&#x27;t have any io tasks
    setInterval(() =&#x3e; {}, 24 * 60 * 60 * 1000);

    this._uncaughtExceptionHandler = this._uncaughtExceptionHandler.bind(this);
    process.on(&#x27;uncaughtException&#x27;, this._uncaughtExceptionHandler);
  }

  _uncaughtExceptionHandler(err) {
    if (!(err instanceof Error)) {
      err = new Error(String(err));
    }
    /* istanbul ignore else */
    if (err.name === &#x27;Error&#x27;) {
      err.name = &#x27;unhandledExceptionError&#x27;;
    }
    this.coreLogger.error(err);
  }

  get [EGG_LOADER]() {
    return AgentWorkerLoader;
  }

  get [EGG_PATH]() {
    return path.join(__dirname, &#x27;..&#x27;);
  }

  _wrapMessenger() {
    for (const methodName of [ &#x27;broadcast&#x27;, &#x27;sendTo&#x27;, &#x27;sendToApp&#x27;, &#x27;sendToAgent&#x27;, &#x27;sendRandom&#x27; ]) {
      wrapMethod(methodName, this.messenger, this.coreLogger);
    }

    function wrapMethod(methodName, messenger, logger) {
      const originMethod = messenger[methodName];
      messenger[methodName] = function() {
        const stack = new Error().stack.split(&#x27;\n&#x27;).slice(1).join(&#x27;\n&#x27;);
        logger.warn(&#x27;agent can\&#x27;t call %s before server started\n%s&#x27;,
          methodName, stack);
        originMethod.apply(this, arguments);
      };
      messenger.once(&#x27;egg-ready&#x27;, () =&#x3e; {
        messenger[methodName] = originMethod;
      });
    }
  }

  close() {
    process.removeListener(&#x27;uncaughtException&#x27;, this._uncaughtExceptionHandler);
    return super.close();
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.AgentWorkerLoader" id="apidoc.element.egg.AgentWorkerLoader">
        function <span class="apidocSignatureSpan">egg.</span>AgentWorkerLoader
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class AgentWorkerLoader extends EggLoader {

<span class="apidocCodeCommentSpan">  /**
   * loadPlugin first, then loadConfig
   */
</span>  loadConfig() {
    super.loadPlugin();
    super.loadConfig();
  }

  load() {
    this.loadAgentExtend();
    this.loadCustomAgent();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.AppWorkerLoader" id="apidoc.element.egg.AppWorkerLoader">
        function <span class="apidocSignatureSpan">egg.</span>AppWorkerLoader
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class AppWorkerLoader extends EggLoader {

<span class="apidocCodeCommentSpan">  /**
   * loadPlugin first, then loadConfig
   * @since 1.0.0
   */
</span>  loadConfig() {
    super.loadPlugin();
    super.loadConfig();
  }

  /**
   * 开始加载所有约定目录
   * @since 1.0.0
   */
  load() {
    // app &#x3e; plugin &#x3e; core
    this.loadApplicationExtend();
    this.loadRequestExtend();
    this.loadResponseExtend();
    this.loadContextExtend();
    this.loadHelperExtend();

    // app &#x3e; plugin
    this.loadCustomApp();
    // app &#x3e; plugin
    this.loadService();
    // app &#x3e; plugin &#x3e; core
    this.loadMiddleware();
    // app
    this.loadController();
    // app
    this.loadRouter(); // 依赖 controller
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.Application" id="apidoc.element.egg.Application">
        function <span class="apidocSignatureSpan">egg.</span>Application
        <span class="apidocSignatureSpan">(options = {})</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Application extends EggApplication {

<span class="apidocCodeCommentSpan">  /**
   * @constructor
   * @param {Object} options - see {@link EggApplication}
   */
</span>  constructor(options = {}) {
    options.type = &#x27;application&#x27;;
    super(options);

    try {
      this.loader.load();
    } catch (e) {
      // close gracefully
      this[CLUSTER_CLIENTS].forEach(cluster.close);
      throw e;
    }

    // dump config after loaded, ensure all the dynamic modifications will be recorded
    this.dumpConfig();
    this.warnConfusedConfig();
    this.bindEvents();
  }

  get [EGG_LOADER]() {
    return AppWorkerLoader;
  }

  get [EGG_PATH]() {
    return path.join(__dirname, &#x27;..&#x27;);
  }

  onServer(server) {
    /* istanbul ignore next */
    graceful({
      server: [ server ],
      error: (err, throwErrorCount) =&#x3e; {
        if (err.message) {
          err.message += &#x27; (uncaughtException throw &#x27; + throwErrorCount + &#x27; times on pid:&#x27; + process.pid + &#x27;)&#x27;;
        }
        this.coreLogger.error(err);
      },
    });
  }

  /**
   * global locals for view
   * @member {Object} Application#locals
   * @see Context#locals
   */
  get locals() {
    if (!this[LOCALS]) {
      this[LOCALS] = {};
    }
    if (this[LOCALS_LIST] &#x26;&#x26; this[LOCALS_LIST].length) {
      assign(this[LOCALS], this[LOCALS_LIST]);
      this[LOCALS_LIST] = null;
    }
    return this[LOCALS];
  }

  set locals(val) {
    if (!this[LOCALS_LIST]) {
      this[LOCALS_LIST] = [];
    }
    this[LOCALS_LIST].push(val);
  }

  /**
   * Create egg context
   * @method Application#createContext
   * @param  {Req} req - node native Request object
   * @param  {Res} res - node native Response object
   * @return {Context} context object
   */
  createContext(req, res) {
    const app = this;
    const context = Object.create(app.context);
    const request = context.request = Object.create(app.request);
    const response = context.response = Object.create(app.response);
    context.app = request.app = response.app = app;
    context.req = request.req = response.req = req;
    context.res = request.res = response.res = res;
    request.ctx = response.ctx = context;
    request.response = response;
    response.request = request;
    context.onerror = context.onerror.bind(context);
    context.originalUrl = request.originalUrl = req.url;

    /**
     * Request start time
     * @member {Number} Context#starttime
     */
    context.starttime = Date.now();
    return context;
  }

  /**
   * Create an anonymouse context, the context isn&#x27;t request level, so the request is mocked.
   * then you can use context level API like `ctx.service`
   * @member {String} Application#createAnonymousContext
   * @param {Request} req - if you want to mock request like querystring, you can pass an object to this function.
   * @return {Context} context
   */
  createAnonymousContext(req) {
    const request = {
      headers: {
        &#x27;x-forwarded-for&#x27;: &#x27;127.0.0.1&#x27;,
      },
      query: {},
      querystring: &#x27;&#x27;,
      host: &#x27;127.0.0.1&#x27;,
      hostname: &#x27;127.0.0.1&#x27;,
      protocol: &#x27;http&#x27;,
      secure: &#x27;false&#x27;,
      method: &#x27;GET&#x27;,
      url: &#x27;/&#x27;,
      path: &#x27;/&#x27;,
      socket: {
        remoteAddress: &#x27;127.0.0.1&#x27;,
        remotePort: 7001,
      },
    };
    if (req) {
      for (const key in req) {
        if (key === &#x27;headers&#x27; || key === &#x27;query&#x27; || key === &#x27;socket&#x27;) {
          Object.assign(request[key], req[key]);
        } else {
          request[key] = req[key];
        }
      }
    }
    const response = new http.ServerResponse(request);
    return this.createContext(request, response);
  }

  /**
   * Run generator function in the background
   * @see Context#runInBackground
   * @param {Generator} scope - generator function, the first args is an anonymous ctx
   */
  runInBackground(scope) {
    const ctx = this.createAnonymousContext();
    ctx.runInBackground(scope);
  }

  /**
   * secret key for Application
   * @member {String} Application#keys
   */
  get keys() {
    if (!this[KEYS]) {
      if (!this.config.keys) {
        if (this.config.env === &#x27;local&#x27; || this.config.env === &#x27;unittest&#x27;) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.Controller" id="apidoc.element.egg.Controller">
        function <span class="apidocSignatureSpan">egg.</span>Controller
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class BaseContextClass {

<span class="apidocCodeCommentSpan">  /**
   * @constructor
   * @param {Context} ctx - context instance
   * @since 1.0.0
   */
</span>  constructor(ctx) {
    /**
     * @member {Context} BaseContextClass#ctx
     * @since 1.0.0
     */
    this.ctx = ctx;
    /**
     * @member {Application} BaseContextClass#app
     * @since 1.0.0
     */
    this.app = ctx.app;
    /**
     * @member {Config} BaseContextClass#config
     * @since 1.0.0
     */
    this.config = ctx.app.config;
    /**
     * @member {Service} BaseContextClass#service
     * @since 1.0.0
     */
    this.service = ctx.service;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.Service" id="apidoc.element.egg.Service">
        function <span class="apidocSignatureSpan">egg.</span>Service
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class BaseContextClass {

<span class="apidocCodeCommentSpan">  /**
   * @constructor
   * @param {Context} ctx - context instance
   * @since 1.0.0
   */
</span>  constructor(ctx) {
    /**
     * @member {Context} BaseContextClass#ctx
     * @since 1.0.0
     */
    this.ctx = ctx;
    /**
     * @member {Application} BaseContextClass#app
     * @since 1.0.0
     */
    this.app = ctx.app;
    /**
     * @member {Config} BaseContextClass#config
     * @since 1.0.0
     */
    this.config = ctx.app.config;
    /**
     * @member {Service} BaseContextClass#service
     * @since 1.0.0
     */
    this.service = ctx.service;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.startCluster" id="apidoc.element.egg.startCluster">
        function <span class="apidocSignatureSpan">egg.</span>startCluster
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startCluster = function (options, callback) {
  new Master(options).ready(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.egg.context" id="apidoc.module.egg.context">module egg.context</a></h1>


    <h2>
        <a href="#apidoc.element.egg.context.curl" id="apidoc.element.egg.context.curl">
        function <span class="apidocSignatureSpan">egg.context.</span>curl
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">curl(url, options) {
  return this.httpclient.curl(url, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * - status {Number} - HTTP response status
 * - headers {Object} - HTTP response seaders
 * - res {Object} - HTTP response meta
 * - data {Object} - HTTP response body
 *
 * @example
 * ```js
 * const result = yield app.<span class="apidocCodeKeywordSpan">curl</span>(&#x27;http://example.com/foo.json&#x27;, {
 *   method: &#x27;GET&#x27;,
 *   dataType: &#x27;json&#x27;,
 * });
 * console.log(result.status, result.headers, result.data);
 * ```
 */
curl(url, opts) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.context.getLogger" id="apidoc.element.egg.context.getLogger">
        function <span class="apidocSignatureSpan">egg.context.</span>getLogger
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLogger(name) {
  let cache = this[CONTEXT_LOGGERS];
  if (!cache) {
    cache = this[CONTEXT_LOGGERS] = {};
  }

  // read from cache
  if (cache[name]) return cache[name];

  // get no exist logger
  const appLogger = this.app.getLogger(name);
  if (!appLogger) return null;

  // write to cache
  cache[name] = new this.app.ContextLogger(this, appLogger);
  return cache[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * application logger, log file is `$HOME/logs/{appname}/{appname}-web`
 * @member {Logger}
 * @since 1.0.0
 */
get logger() {
  return this.<span class="apidocCodeKeywordSpan">getLogger</span>(&#x27;logger&#x27;);
}

/**
 * core logger for framework and plugins, log file is `$HOME/logs/{appname}/egg-web`
 * @member {Logger}
 * @since 1.0.0
 */
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.context.runInBackground" id="apidoc.element.egg.context.runInBackground">
        function <span class="apidocSignatureSpan">egg.context.</span>runInBackground
        <span class="apidocSignatureSpan">(scope)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">runInBackground(scope) {
  const ctx = this;
  const start = Date.now();
<span class="apidocCodeCommentSpan">  /* istanbul ignore next */
</span>  const taskName = scope.name || &#x27;-&#x27;;
  co(function* () {
    yield scope(ctx);
    ctx.coreLogger.info(&#x27;[egg:background] task:%s success (%dms)&#x27;, taskName, Date.now() - start);
  }).catch(err =&#x3e; {
    ctx.coreLogger.info(&#x27;[egg:background] task:%s fail (%dms)&#x27;, taskName, Date.now() - start);
    ctx.coreLogger.error(err);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Run generator function in the background
 * @see Context#runInBackground
 * @param {Generator} scope - generator function, the first args is an anonymous ctx
 */
runInBackground(scope) {
  const ctx = this.createAnonymousContext();
  ctx.<span class="apidocCodeKeywordSpan">runInBackground</span>(scope);
}

/**
 * secret key for Application
 * @member {String} Application#keys
 */
get keys() {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.egg.helper" id="apidoc.module.egg.helper">module egg.helper</a></h1>


    <h2>
        <a href="#apidoc.element.egg.helper.pathFor" id="apidoc.element.egg.helper.pathFor">
        function <span class="apidocSignatureSpan">egg.helper.</span>pathFor
        <span class="apidocSignatureSpan">(name, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pathFor(name, params) {
  return this.app.router.url(name, params);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Alias to {@link Application#router}
 *
 * @member {Router} Context#router
 * @since 1.0.0
 * @example
 * ```js
 * this.router.<span class="apidocCodeKeywordSpan">pathFor</span>(&#x27;post&#x27;, { id: 12 });
 * ```
 */
get router() {
  return this.app.router;
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.egg.helper.urlFor" id="apidoc.element.egg.helper.urlFor">
        function <span class="apidocSignatureSpan">egg.helper.</span>urlFor
        <span class="apidocSignatureSpan">(name, params)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">urlFor(name, params) {
  return this.ctx.protocol + &#x27;://&#x27; + this.ctx.host + url.resolve(&#x27;/&#x27;, this.app.router.url(name, params));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Generate full URL(with host) for route. Takes the route name and a map of named params.
 * @method Helper#urlFor
 * @param {String} name - Router name
 * @param {Object} params - Other params
 * @example
 * ```js
 * app.get(&#x27;home&#x27;, &#x27;/index.htm&#x27;, &#x27;home.index&#x27;);
 * helper.<span class="apidocCodeKeywordSpan">urlFor</span>(&#x27;home&#x27;, { by: &#x27;recent&#x27;, limit: 20 })
 * =&#x3e; http://127.0.0.1:7001/index.htm?by=recent&#x26;limit=20
 * ```
 * @return {String} full url(with host)
 */
urlFor(name, params) {
  return this.ctx.protocol + &#x27;://&#x27; + this.ctx.host + url.resolve(&#x27;/&#x27;, this.app.router.url(name, params));
},
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.egg.request" id="apidoc.module.egg.request">module egg.request</a></h1>


    <h2>
        <a href="#apidoc.element.egg.request._customQuery" id="apidoc.element.egg.request._customQuery">
        function <span class="apidocSignatureSpan">egg.request.</span>_customQuery
        <span class="apidocSignatureSpan">(cacheName, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_customQuery(cacheName, filter) {
  const str = this.querystring;
  if (!str) {
    return {};
  }

  let c = this[cacheName];
  if (!c) {
    c = this[cacheName] = {};
  }
  let cacheQuery = c[str];
  if (!cacheQuery) {
    cacheQuery = c[str] = {};
    const isQueries = cacheName === _queriesCache;
    // querystring.parse 不会解析 a[foo]=1&#x26;a[bar]=2 的情况
    const query = querystring.parse(str);
    for (const key in query) {
      if (!key) {
        // key is &#x27;&#x27;, like `a=b&#x26;`
        continue;
      }
      const value = filter(query[key]);
      cacheQuery[key] = value;
      if (isQueries &#x26;&#x26; RE_ARRAY_KEY.test(key)) {
        // 支持兼容 this.queries[&#x27;key&#x27;] =&#x3e; this.queries[&#x27;key[]&#x27;]
        const subkey = key.substring(0, key.length - 2);

        if (!cacheQuery[subkey]) {
          cacheQuery[subkey] = value;
        }
      }
    }
  }
  return cacheQuery;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 *   &#x22;o[foo]&#x22;: &#x22;bar&#x22;,
 *   &#x22;b[]&#x22;: &#x22;1&#x22;,
 *   &#x22;e&#x22;: &#x22;val&#x22;
 * }
 * ```
 */
get query() {
  return this.<span class="apidocCodeKeywordSpan">_customQuery</span>(_querycache, firstValue);
},

/**
 * 获取当前请求以 querystring 传递的参数，所有参数值都以 Array 类型返回，类似 {@link Request#query}
 * @member {Array} Request#queries
 * @example
 * ```js
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.egg.utils" id="apidoc.module.egg.utils">module egg.utils</a></h1>


    <h2>
        <a href="#apidoc.element.egg.utils.convertObject" id="apidoc.element.egg.utils.convertObject">
        function <span class="apidocSignatureSpan">egg.utils.</span>convertObject
        <span class="apidocSignatureSpan">(obj, ignore)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function convertObject(obj, ignore) {
  if (!is.array(ignore)) ignore = [ ignore ];
  for (const key of Object.keys(obj)) {
    obj[key] = convertValue(key, obj[key], ignore);
  }
  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ignoreList = [];
  }
  const dumpFile = path.join(rundir, `${this.type}_config.json`);
  try {
    /* istanbul ignore if */
    if (!fs.existsSync(rundir)) fs.mkdirSync(rundir);
    const json = extend(true, {}, { config: this.config, plugins: this.plugins });
    utils.<span class="apidocCodeKeywordSpan">convertObject</span>(json, ignoreList);
    fs.writeFileSync(dumpFile, JSON.stringify(json, null, 2));
  } catch (err) {
    this.coreLogger.warn(`dumpConfig error: ${err.message}`);
  }
}

get [EGG_PATH]() {
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
